<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç­†è·¡æ€§æ ¼è¨ºæ–­</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
/* =====================
 * å…±é€šã‚¹ã‚¿ã‚¤ãƒ« (å¤‰æ›´ãªã—)
 * ===================== */
body {
    font-family: "Hiragino Sans", "Arial", sans-serif;
    background: #f0f4f8;
    padding: 20px;
    text-align: center;
    color: #333;
}
#Screen {
    text-align: center;
    padding: 30px;
    max-width: 750px; 
    margin: 0 auto;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.05);
}
h2 { color: #5a5a5a; margin-bottom: 20px; }

#startBtn {
    height: 40px;
    width: 200px;
    border-color: #aaf;
    border-radius: 16px;
    color: #fff;
    font-size: 1.2em;
    background: linear-gradient(135deg, #007bff, #0056b3);
}

#startBtn:hover {
    opacity: 0.7;
}

/* =====================
 * è³ªå•ã‚¨ãƒªã‚¢ (å¤‰æ›´ãªã—)
 * ===================== */
.status {
    font-size: 1.2em;
    margin-bottom: 24px;
    font-weight: bold;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 0 10px;
}
#mainImageArea {
    margin-bottom: 20px; 
    min-height: 250px; /* ç”»åƒã‚¨ãƒªã‚¢ã®æœ€å°é«˜ã•ã‚’å¢—ã‚„ã™ */
    /* ä¸­å¤®é…ç½®ã‚’æ˜ç¢ºã«ã™ã‚‹ãŸã‚ã«è¿½åŠ  */
    display: flex;
    justify-content: center;
    align-items: center;
}

#mainImage {
    min-width: 250px; 
    min-height: 200px; /* ç”»åƒã®æœ€å¤§é«˜ã•ã‚’å¢—ã‚„ã™ï¼ˆä¾‹: 150px -> 300pxï¼‰ */
    height: auto; 
    border: 1px solid #ddd; 
    display: none;
    /* object-fit: contain; /* å¿…è¦ã«å¿œã˜ã¦è¿½åŠ  */
}
.choices-container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap; 
    gap: 20px;
    margin: 30px 0;
}
.choice-item {
    cursor: pointer;
    text-align: center;
    border: 3px solid transparent;
    border-radius: 8px;
    padding: 10px;
    transition: all 0.2s;
    background: #f9f9f9;
    flex: 1 1 40%; 
    max-width: 300px;
    min-height: 80px; 
    display: flex;
    align-items: center;
    justify-content: center;
}
.choice-item:hover {
    background: #eef7ff;
    border-color: #a0d4ff;
}
.choice-item img {
    display: none !important;
}
.choice-label {
    font-weight: bold;
    font-size: 1.1em;
    padding: 5px 0;
    color: #555;
    text-align: center;
}

input[type="radio"] { 
    display: none !important; 
}
input[type="radio"]:checked + .choice-item {
    border-color: #007bff;
    background: #e6f2ff;
    box-shadow: 0 0 10px rgba(0, 123, 255, 0.3);
}

/* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ (å¤‰æ›´ãªã—) */
.progress { margin-top: 20px; font-size: 14px; color: #888; }
#prevBtn, #nextBtn {
    margin: 20px 10px;
    padding: 10px 25px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}
#nextBtn { background-color: #5a5a5a; color: white; }
#prevBtn { background-color: #e0e0e0; color: #555; }
#nextBtn:hover { background-color: #333; }

/* =====================
 * çµæœç”»é¢ (å¤‰æ›´ãªã—)
 * ===================== */
.result-section {
    margin-bottom: 30px;
    padding: 20px;
    background: #f9f9f9;
    border-radius: 12px;
    text-align: left;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}
.result-section h3 {
    text-align: center;
    margin-bottom: 15px;
    color: #5a5a5a;
    border-bottom: 2px solid #eee;
    padding-bottom: 10px;
}
.matrix-result {
    border: 3px solid #007bff;
    background: #e6f2ff;
    padding: 25px;
    text-align: center;
    margin-bottom: 20px;
}
.matrix-result h3 {
    color: #007bff;
    font-size: 1.8em;
    border-bottom: none;
}
.individual-result {
    padding: 25px;
    text-align: center;
    margin-bottom: 20px;
    border: 3px solid; /* è‰²ã¯JSã§æŒ‡å®š */
}
.individual-result h3 {
    font-size: 1.8em;
    border-bottom: none;
}
.chart-title {
    font-size: 1.3em;
    font-weight: bold;
    margin-bottom: 15px;
    text-align: center;
    color: #333;
}
/* Chartè¡¨ç¤ºã‚¨ãƒªã‚¢ã®ã‚µã‚¤ã‚ºèª¿æ•´ */
#matrixChartContainer, #charts-area {
    margin: 0 auto 30px;
    max-width: 450px; 
}
/* ã‚­ãƒ£ãƒ³ãƒã‚¹è¦ç´ è‡ªä½“ã‚’ä¸­å¤®ã«é…ç½®ã™ã‚‹ãŸã‚ã®è¿½åŠ èª¿æ•´ */
#matrixChart {
    /* Chart.jsã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚Œã‚‹ã‚­ãƒ£ãƒ³ãƒã‚¹è¦ç´  */
    display: block; /* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³è¦ç´ ã®ä½™ç™½ã‚’ãªãã™ */
    margin: 0 auto; /* ç¢ºå®Ÿã«ä¸­å¤®å¯„ã› */
}

/* â˜… 5æ®µéšè©•ä¾¡ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« (å¤‰æ›´ãªã—) */
.star-rating-container {
    max-width: 400px;
    margin: 20px auto;
}
.trait-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px dashed #ddd;
}
.trait-item:last-child {
    border-bottom: none;
}
.trait-name {
    font-weight: bold;
    color: #333;
    flex-basis: 35%;
    text-align: left;
}
.stars {
    flex-basis: 60%;
    text-align: right;
    font-size: 1.3em;
    color: gold; /* è©•ä¾¡è‰² */
    letter-spacing: 2px;
}


/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« (å¤‰æ›´ãªã—) */
#result-buttons {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #ddd;
}
.action-btn {
    display: block;
    width: 100%;
    max-width: 300px;
    margin: 10px auto;
    padding: 12px;
    font-size: 16px;
    border-radius: 30px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s;
    border: none;
}
.reload-btn {
    background-color: #f0f0f0; 
    color: #333; 
    border: 1px solid #ccc;
}
.share-btn {
    background-color: #1DA1F2; 
    color: white;
}
.note-btn {
    background-color: #3B7E3E; 
    color: white;
}
</style>
</head>
<body>

<div id="Screen">

<div id="startScreen">
<h2>ç­†è·¡æ€§æ ¼è¨ºæ–­</h2>
<p>ç­†è·¡ã®ç‰¹å¾´ã‹ã‚‰ã€è¡Œå‹•ç‰¹æ€§ãƒ»è²¬ä»»æ„Ÿãƒ»è©³ç´°æ€§æ ¼ã®å‚¾å‘ã‚’è¨ºæ–­ã—ã¾ã™ã€‚</p>
<br>

<p>
ã¾ãšã¯ã€å®›åæ›¸ãã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ãªãŒã‚‰ Â <br><br>
<strong style="font-size: 2em;">ã€Œæ—¥æœ¨å£é‡å­æ§˜ã€</strong><br><br>
ã®6æ–‡å­—ã‚’æ›¸ã„ã¦ãã ã•ã„ğŸ–Šã€‚<br><br><br>
â€»åŸç¨¿ç”¨ç´™ã®ãƒã‚¹ç›®ã®ä¸­ã«æ›¸ãã“ã¨ã‚’æ¨å¥¨<br><br><br>

æ›¸ã‘ã¾ã—ãŸã‹ï¼Ÿâ€¦æ›¸ã‘ãŸã‚‰ã€ã“ã“ã‹ã‚‰ãŒæœ¬ç•ªã§ã™ï¼<br><br>
ğŸ‘‡
</p>

<button id="startBtn">è¨ºæ–­ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<div id="questionScreen" style="display: none;">
<div class="progress" id="progress">1 / 8</div>
<div class="status" id="questionText"></div>

<div id="mainImageArea" style="margin-bottom: 20px; min-height: 150px;">
Â  Â  <img id="mainImage" style="max-width: 100%; max-height: 150px; height: auto; border: 1px solid #ddd; display: none;">
</div>

<div class="choices-container" id="choices">
Â  Â  </div>

<div>
<button id="prevBtn">æˆ»ã‚‹</button>
<button id="nextBtn">æ¬¡ã¸</button>
</div>
</div>

<div id="result-container" style="display:none; padding-bottom: 30px;">
<h2>ç­†è·¡æ€§æ ¼è¨ºæ–­ã®çµæœ</h2>

<div id="matrix-result-area" class="result-section"></div>

<div id="charts-area">
Â  Â  <div class="chart-title">ã€è¨ºæ–­ IIIã€‘3ã¤ã®è©³ç´°æ€§æ ¼ 5æ®µéšè©•ä¾¡</div>
Â  Â  <div id="starRatingsContainer" class="star-rating-container">
Â  Â  </div>

<br>
<br>
    <p style="text-align: left;">
        ã“ã®ç­†è·¡è¨ºæ–­ã‚¢ãƒ—ãƒªã§ç¤ºã—ãŸçµæœã¯å€‹äººã®è¡Œå‹•ç‰¹æ€§ã‚„æ€§æ ¼ã‚’å‹ã«ã¯ã‚ã¦å›ºå®šåŒ–ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
        â€œç­†è·¡â€ã‚’åŸºã«è¡Œå‹•ç‰¹æ€§ã‚„æ€§æ ¼ã®å‚¾å‘ã‚’ã¤ã‹ã‚€è‡ªå·±ç†è§£ã®ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚<br>
        ã€Œãã†ã„ã†å‚¾å‘ã‚ã‚‹ã‹ã‚‚ã€ãªã©ã€è‡ªåˆ†è‡ªèº«ã«å¯¾ã™ã‚‹æ°—ä»˜ããƒ»å†…çœã‚’ä¿ƒã™ã“ã¨ã‚’æ„å›³ã—ã¦ã„ã¾ã™ã€‚
    </p>
</div>

<div id="analysis-area"></div> 


<div id="result-buttons"></div>
</div>

</div>

<script>
/* =====================
Â * 0. è¨­å®šã¨ãƒ‡ãƒ¼ã‚¿
Â * ===================== */

// ã‚¿ã‚¤ãƒ—IIIï¼ˆãƒ¬ãƒ¼ãƒ€ãƒ¼è»¸ï¼‰ã®å®šç¾© (A:å …å®Ÿæ€§, B:æŸ”è»Ÿæ€§, C:è²¬ä»»æ„Ÿ)
const radarMapName = {
Â  Â  A: "å …å®Ÿæ€§", 
Â  Â  B: "æŸ”è»Ÿæ€§", 
Â  Â  C: "è²¬ä»»æ„Ÿã®å¼·ã•" 
};
const initialRadarScores = { A: 0, B: 0, C: 0 };


// å…¨8å•ã®ãƒ‡ãƒ¼ã‚¿å®šç¾© (å¤‰æ›´ãªã—)
const questions = [
Â  Â  { 
Â  Â  Â  Â  id: 1, type: 'i', text: "æ›¸ã„ãŸæ–‡å­—ã®ãƒã‚¹ç›®ã«å¯¾ã—ã¦ã®å¤§ãã•ã¯ï¼Ÿ", 
Â  Â  Â  Â  mainImage: "images/size.jpg",
Â  Â  Â  Â  choices: [
Â  Â  Â  Â  Â  Â  { label: "A. ãƒã‚¹ç›®ã„ã£ã±ã„ã®å¤§ãã•", scores: { X: 0.2, Y: 0.4 } }, 
Â  Â  Â  Â  Â  Â  { label: "B. ä¸­ãã‚‰ã„ã®å¤§ãã•", scores: { X: 0, Y: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "C. ä½™ç™½ãŒä½™ã‚‹ãã‚‰ã„ã«å°ã•ã„", scores: { X: -0.2, Y: -0.4 } } 
Â  Â  Â  Â  ], answer: null 
Â  Â  },
Â  Â  { 
Â  Â  Â  Â  id: 2, type: 'i', text: "ç­†åœ§ã®å¼·ã•ã¯ï¼Ÿ", 
Â  Â  Â  Â  mainImage: "images/strong.jpg",
Â  Â  Â  Â  choices: [
Â  Â  Â  Â  Â  Â  { label: "A. å¼·ã„", scores: { X: 0.4, Y: 0.2 } }, 
Â  Â  Â  Â  Â  Â  { label: "B. ãµã¤ã†", scores: { X: 0, Y: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "C. å¼±ã„", scores: { X: -0.4, Y: -0.2 } } 
Â  Â  Â  Â  ], answer: null 
Â  Â  },
Â  Â  {
Â  Â  Â  Â  id: 3, type: 'ii_1', text: "ã€Œæ§˜ã€ã®ç­†è·¡ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ", 
Â  Â  Â  Â  mainImage: "images/sama.jpg",
Â  Â  Â  Â  choices: [
Â  Â  Â  Â  Â  Â  { label: "A. æœ¨ã¸ã‚“ã®çªãæŠœã‘ãŒå¤§ãã„", scores: { type: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "B. æœ¨ã¸ã‚“ã®çªãæŠœã‘ãŒå°ã•ã„", scores: { type: 1 } }, 
Â  Â  Â  Â  Â  Â  { label: "C. ã¸ã‚“ã¨ã¤ãã‚Šã®é–“ãŒåºƒã„", scores: { type: 2 } }, 
Â  Â  Â  Â  Â  Â  { label: "D. ã¸ã‚“ã¨ã¤ãã‚Šã®é–“ãŒç‹­ã„", scores: { type: 3 } }, 
Â  Â  Â  Â  Â  Â  { label: "E. æœ¨ã¸ã‚“ã®æ›¸ãå‡ºã—ã®ã‚¯ã‚»ãŒå¼·ã„", scores: { type: 4 } }, 
Â  Â  Â  Â  Â  Â  { label: "F. æœ¨ã¸ã‚“ã®æ›¸ãå‡ºã—ãŒãŠã ã‚„ã‹", scores: { type: 5 } } 
Â  Â  Â  Â  ], answer: null
Â  Â  },
Â  Â  { 
Â  Â  Â  Â  id: 4, type: 'iii', text: "ã€Œæ—¥ã€ã®ç­†è·¡ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ", 
Â  Â  Â  Â  mainImage: "images/nichi.jpg",
Â  Â  Â  Â  choices: [
Â  Â  Â  Â  Â  Â  { label: "A. ã™ãé–“ãŒãªãã€è§’ãŒæ­£ç¢º (ãƒ«ãƒ¼ãƒ«ã«å¯¾ã—ã¦å³æ ¼)", scores: { A: 6, B: -4, C: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "B. å°‘ã—ã™ãé–“ãŒã‚ã‚Šã€è§’ã¯æ­£ç¢º", scores: { A: 2, B: 2, C: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "C. å³ä¸Šè§’ãŒä¸¸ã„ (æŸ”è»Ÿ/é©å¿œ)", scores: { B: 6, A: -4, C: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "D. ã™ãé–“ãŒã‚ã‚Šã€å³ä¸Šè§’ã‚‚ä¸¸ã„ (ãƒ«ãƒ¼ãƒ«ã«å¯¾ã—ã¦ãƒ«ãƒ¼ã‚º)", scores: { B: 4, A: -6, C: 0 } } 
Â  Â  Â  Â  ], answer: null 
Â  Â  },
Â  Â  { 
Â  Â  Â  Â  id: 5, type: 'ii_2', text: "ã€Œæœ¨ã€ã®ç­†è·¡ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ", 
Â  Â  Â  Â  mainImage: "images/ki.jpg", 
Â  Â  Â  Â  choices: [
Â  Â  Â  Â  Â  Â  { label: "A. å·¦ã¯ã‚‰ã„ãŒé•·ã„", scores: { type: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "B. ãƒãƒ©ãƒ³ã‚¹ãŒã¨ã‚Œã¦ã„ã‚‹", scores: { type: 1 } }, 
Â  Â  Â  Â  Â  Â  { label: "C. å³ã¯ã‚‰ã„ãŒé•·ã„", scores: { type: 2 } } 
Â  Â  Â  Â  ], answer: null 
Â  Â  },
Â  Â  { 
Â  Â  Â  Â  id: 6, type: 'iii', text: "ã€Œå£ã€ã®ç­†è·¡ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ", 
Â  Â  Â  Â  mainImage: "images/kuchi.jpg", 
Â  Â  Â  Â  choices: [
Â  Â  Â  Â  Â  Â  { label: "A. çµã³ç›®ã‚‚å«ã‚ã¦ã™ãé–“ãªãå¯†é–‰", scores: { A: 4, B: -3, C: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "B. ã‚„ã‚„çµã³ç›®ã«ã™ãé–“ãŒã‚ã‚‹", scores: { A: 2, B: 1, C: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "C. 3ãƒ»4ç”»ç›®ãŒã€ŒZã€ã®ã‚ˆã†ã«å´©ã—ã¦æ›¸ã‹ã‚Œã¦ã„ã‚‹", scores: { B: 4, A: -3, C: 0 } }
Â  Â  Â  Â  ], answer: null 
Â  Â  },
Â  Â  { 
Â  Â  Â  Â  id: 7, type: 'ii_3', text: "ã€Œé‡ã€ã®ç­†è·¡ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ", 
Â  Â  Â  Â  mainImage: "images/ryou.jpg",
Â  Â  Â  Â  choices: [
Â  Â  Â  Â  Â  Â  { label: "A. æ¨ªç”»ãŒç­‰é–“éš”ã§æ•´ç„¶ã¨ã—ã¦ã„ã‚‹", scores: { type: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "B. æ¨ªç”»ã®é–“éš”ãŒã°ã‚‰ã°ã‚‰ã§ã‚ã‚‹", scores: { type: 1 } } 
Â  Â  Â  Â  ], answer: null 
Â  Â  },
Â  Â  { 
Â  Â  Â  Â  id: 8, type: 'iii', text: "ã€Œå­ã€ã®ç­†è·¡ã¯ã©ã‚Œã«è¿‘ã„ã§ã™ã‹ï¼Ÿ", 
Â  Â  Â  Â  mainImage: "images/ko.jpg",
Â  Â  Â  Â  choices: [
Â  Â  Â  Â  Â  Â  { label: "A. æœ€å¾Œã®ã¯ã­ã®éƒ¨åˆ†ãŒå¤§ããã€åŠ›å¼·ãã¯ã­ã¦ã„ã‚‹", scores: { C: 10, A: 0, B: 0 } }, 
            { label: "B. æœ€å¾Œã®ã¯ã­ã®éƒ¨åˆ†ã®å¤§ãã•ã¯ä¸­ç¨‹åº¦", scores: { C: 0, A: 0, B: 0 } }, 
Â  Â  Â  Â  Â  Â  { label: "C. æœ€å¾Œã®ã¯ã­ã®éƒ¨åˆ†ãŒå°ã•ã„ã€ã¾ãŸã¯ã»ã¨ã‚“ã©ã¯ã­ã¦ã„ãªã„", scores: { C: -8, A: 0, B: 0 } } 
Â  Â  Â  Â  ], answer: null 
Â  Â  }
];


/* =====================
Â * 1. åˆ¶å¾¡ãƒ­ã‚¸ãƒƒã‚¯ (å¤‰æ›´ãªã—)
Â * ===================== */
let current = 0;
const total = questions.length; 

const startScreen = document.getElementById("startScreen");
const questionScreen = document.getElementById("questionScreen");
const resultContainer = document.getElementById("result-container");
const questionText = document.getElementById("questionText");
const choicesDiv = document.getElementById("choices");
const progress = document.getElementById("progress");
const mainImage = document.getElementById("mainImage");

document.getElementById("startBtn").addEventListener("click", () => {
Â  Â  startScreen.style.display = "none";
Â  Â  questionScreen.style.display = "block";
Â  Â  renderQuestion();
});

function renderQuestion() {
Â  Â  const q = questions[current];
Â  Â  questionText.textContent = `Q${q.id}. ${q.text}`;
Â  Â  progress.textContent = `${current + 1} / ${total}`;
Â  Â  
Â  Â  if (q.mainImage) {
Â  Â  Â  Â  mainImage.src = q.mainImage;
Â  Â  Â  Â  mainImage.style.display = "block";
Â  Â  } else {
Â  Â  Â  Â  mainImage.style.display = "none";
Â  Â  }

Â  Â  renderChoices(q);

Â  Â  document.getElementById("prevBtn").style.visibility = current === 0 ? "hidden" : "visible";
Â  Â  document.getElementById("nextBtn").textContent = current === total - 1 ? "çµæœã‚’è¦‹ã‚‹" : "æ¬¡ã¸";
}

function renderChoices(q) {
Â  Â  choicesDiv.innerHTML = "";
Â  Â  q.choices.forEach((choice, index) => {
Â  Â  Â  Â  const input = document.createElement("input");
Â  Â  Â  Â  input.type = "radio";
Â  Â  Â  Â  input.name = "answer";
Â  Â  Â  Â  input.id = `q${current}_${index}`;
Â  Â  Â  Â  input.value = index;

Â  Â  Â  Â  const label = document.createElement("label");
Â  Â  Â  Â  label.setAttribute("for", input.id);
Â  Â  Â  Â  label.className = "choice-item";
Â  Â  Â  Â  
Â  Â  Â  Â  const span = document.createElement("span");
Â  Â  Â  Â  span.className = "choice-label";
Â  Â  Â  Â  span.textContent = choice.label;

Â  Â  Â  Â  label.appendChild(span);

Â  Â  Â  Â  if (q.answer === index) input.checked = true;

Â  Â  Â  Â  input.addEventListener("change", () => { q.answer = index; });

Â  Â  Â  Â  choicesDiv.appendChild(input);
Â  Â  Â  Â  choicesDiv.appendChild(label);
Â  Â  });
}

document.getElementById("nextBtn").addEventListener("click", goNext);
document.getElementById("prevBtn").addEventListener("click", () => {
Â  Â  if (current > 0) { current--; renderQuestion(); }
});

function goNext() {
Â  Â  if (questions[current].answer === null) {
Â  Â  Â  Â  alert("å›ç­”ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
Â  Â  Â  Â  return;
Â  Â  }
Â  Â  if (current < total - 1) {
Â  Â  Â  Â  current++;
Â  Â  Â  Â  renderQuestion();
Â  Â  } else {
Â  Â  Â  Â  if (confirm("è¨ºæ–­ã‚’çµ‚äº†ã—ã¦çµæœã‚’è¡¨ç¤ºã—ã¾ã™ã‹ï¼Ÿ")) showResult();
Â  Â  }
}


/* =====================
Â * 2. é›†è¨ˆãƒ»çµæœè¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ (å¤‰æ›´ãªã—)
Â * ===================== */

function calculateResults() {
Â  Â  const finalRadarScores = { ...initialRadarScores }; 
Â  Â  const finalMatrixScores = { X: 0, Y: 0 };
Â  Â  
Â  Â  let finalTypeII_1 = null; 
Â  Â  let finalTypeII_2 = null; 
Â  Â  let finalTypeII_3 = null; 
Â  Â  
Â  Â  const maxMatrixAbs = 0.6; 
Â  Â  const absoluteRadarMax = 10; 

Â  Â  questions.forEach(q => {
Â  Â  Â  Â  if (q.answer !== null) {
Â  Â  Â  Â  Â  Â  const selectedScores = q.choices[q.answer].scores;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (q.type === 'i') {
Â  Â  Â  Â  Â  Â  Â  Â  finalMatrixScores.X += selectedScores.X || 0;
Â  Â  Â  Â  Â  Â  Â  Â  finalMatrixScores.Y += selectedScores.Y || 0;
Â  Â  Â  Â  Â  Â  } else if (q.type === 'ii_1') {
Â  Â  Â  Â  Â  Â  Â  Â  finalTypeII_1 = selectedScores.type;
Â  Â  Â  Â  Â  Â  } else if (q.type === 'ii_2') {
Â  Â  Â  Â  Â  Â  Â  Â  finalTypeII_2 = selectedScores.type;
Â  Â  Â  Â  Â  Â  } else if (q.type === 'ii_3') {
Â  Â  Â  Â  Â  Â  Â  Â  finalTypeII_3 = selectedScores.type;
Â  Â  Â  Â  Â  Â  } else if (q.type === 'iii') { 
Â  Â  Â  Â  Â  Â  Â  Â  finalRadarScores.A += selectedScores.A || 0;
Â  Â  Â  Â  Â  Â  Â  Â  finalRadarScores.B += selectedScores.B || 0;
Â  Â  Â  Â  Â  Â  Â  Â  finalRadarScores.C += selectedScores.C || 0; 
Â  Â  Â  Â  Â  Â  } 
Â  Â  Â  Â  }
Â  Â  });
Â  Â  
Â  Â  // ãƒ¬ãƒ¼ãƒ€ãƒ¼è»¸ã®æ­£è¦åŒ– (Â±10ç‚¹ã‚¹ã‚±ãƒ¼ãƒ«)
Â  Â  const normalizedRadarScores = {};
Â  Â  const scale = 10;
Â  Â  for (let key in finalRadarScores) {
Â  Â  Â  Â  if (absoluteRadarMax > 0) {
Â  Â  Â  Â  Â  Â  normalizedRadarScores[key] = parseFloat(((finalRadarScores[key] / absoluteRadarMax) * scale).toFixed(1)); 
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  normalizedRadarScores[key] = 0;
Â  Â  Â  Â  }
Â  Â  }
Â  Â  
Â  Â  // ãƒãƒˆãƒªã‚¯ã‚¹è»¸ã®æ­£è¦åŒ– (Â±1.0ç‚¹ã‚¹ã‚±ãƒ¼ãƒ«)
Â  Â  const normalizedMatrixScores = {
Â  Â  Â  Â  X: parseFloat(((finalMatrixScores.X / maxMatrixAbs) * 1.0).toFixed(1)), 
Â  Â  Â  Â  Y: parseFloat(((finalMatrixScores.Y / maxMatrixAbs) * 1.0).toFixed(1))
Â  Â  };

Â  Â  return { 
Â  Â  Â  Â  matrix: normalizedMatrixScores, 
Â  Â  Â  Â  radar: normalizedRadarScores, 
Â  Â  Â  Â  typeII_1: finalTypeII_1, 
Â  Â  Â  Â  typeII_2: finalTypeII_2, 
Â  Â  Â  Â  typeII_3: finalTypeII_3 
Â  Â  };
}

function showResult() {
Â  Â  questionScreen.style.display = "none";
Â  Â  resultContainer.style.display = "block";
Â  Â  window.scrollTo(0, 0);

Â  Â  const results = calculateResults();
Â  Â  const matrixArea = document.getElementById("matrix-result-area");
Â  Â  const chartsArea = document.getElementById("charts-area");
Â  Â  const analysisArea = document.getElementById("analysis-area");
Â  Â  const starRatingsContainer = document.getElementById("starRatingsContainer");
Â  Â  const btnArea = document.getElementById("result-buttons");
Â  Â  
Â  Â  analysisArea.innerHTML = ''; 

Â  Â  // I. ãƒãƒˆãƒªã‚¯ã‚¹çµæœã®è¡¨ç¤º
Â  Â  const matrixAnalysis = getMatrixAnalysis(results.matrix.X, results.matrix.Y);
Â  Â  matrixArea.innerHTML = `
Â  Â  Â  Â  <h3>ã€è¨ºæ–­ Iã€‘è¡Œå‹•ç‰¹æ€§ãƒãƒˆãƒªã‚¯ã‚¹</h3>
Â  Â  Â  Â  <div class="matrix-result">
Â  Â  Â  Â  Â  Â  <div id="matrixChartContainer" style="height: 300px;">
Â  Â  Â  Â  Â  Â  Â  Â  <canvas id="matrixChart"></canvas>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <!--<h3>${matrixAnalysis.name}</h3>-->
Â  Â  Â  Â  Â  Â  <p style="margin-top:15px; font-weight:bold; text-align: left;">${matrixAnalysis.desc}</p>
Â  Â  Â  Â  Â  Â  <p style="font-size:0.9em; color:#555; margin-top:10px; text-align: left;">${matrixAnalysis.detail}</p>
Â  Â  Â  Â  </div>
Â  Â  `;

Â  Â  // ã‚°ãƒ©ãƒ•æç”»
Â  Â  renderMatrixChart(results.matrix.X, results.matrix.Y, 'matrixChart'); 
Â  Â  
Â  Â  
Â  Â  // II-1. Q3 (æ§˜: è²¬ä»»æ„Ÿã¨å¯¾äººã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆ) ã®çµæœè¡¨ç¤º
Â  Â  const typeII_1Analysis = getTypeII_1Analysis(results.typeII_1);
Â  Â  analysisArea.innerHTML += `
Â  Â  Â  Â  <div class="result-section">
Â  Â  Â  Â  Â  Â  <h3>ã€è¨ºæ–­ II-1ã€‘ã€Œæ§˜ã€ã®å­—ãŒç¤ºã™è²¬ä»»æ„Ÿã¨å¯¾äººã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒ³ãƒˆ</h3>
Â  Â  Â  Â  Â  Â  <div class="individual-result" style="border-color:#007bff; background:#e6f2ff;">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="color:#007bff;">${typeII_1Analysis.name}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p style="margin-top:15px; font-weight:bold; text-align: left;">${typeII_1Analysis.desc}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size:0.9em; color:#555; margin-top:10px; text-align: left;">${typeII_1Analysis.detail}</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  `;

Â  Â  // II-2. Q5 (æœ¨: è‡ªå·±é¡•ç¤ºæ¬²ã¨ç†±ä¸­ã‚¿ã‚¤ãƒ—) ã®çµæœè¡¨ç¤º
Â  Â  const typeII_2Analysis = getTypeII_2Analysis(results.typeII_2);
Â  Â  analysisArea.innerHTML += `
Â  Â  Â  Â  <div class="result-section">
Â  Â  Â  Â  Â  Â  <h3>ã€è¨ºæ–­ II-2ã€‘ã€Œæœ¨ã€ã®å­—ãŒç¤ºã™è‡ªå·±é¡•ç¤ºæ¬²ã¨ç†±ä¸­ã‚¿ã‚¤ãƒ—</h3>
Â  Â  Â  Â  Â  Â  <div class="individual-result" style="border-color:#3B7E3E; background:#e9f9e9;">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="color:#3B7E3E;">${typeII_2Analysis.name}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p style="margin-top:15px; font-weight:bold; text-align: left;">${typeII_2Analysis.desc}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size:0.9em; color:#555; margin-top:10px; text-align: left;">${typeII_2Analysis.detail}</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  `;

Â  Â  // II-3. Q7 (é‡: åˆ¤æ–­å‚¾å‘) ã®çµæœè¡¨ç¤º
Â  Â  const typeII_3Analysis = getTypeII_3Analysis(results.typeII_3);
Â  Â  analysisArea.innerHTML += `
Â  Â  Â  Â  <div class="result-section">
Â  Â  Â  Â  Â  Â  <h3>ã€è¨ºæ–­ II-3ã€‘ã€Œé‡ã€ã®å­—ãŒç¤ºã™åˆ¤æ–­å‚¾å‘</h3>
Â  Â  Â  Â  Â  Â  <div class="individual-result" style="border-color:#d49100; background:#fff7e6;">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 style="color:#d49100;">${typeII_3Analysis.name}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p style="margin-top:15px; font-weight:bold; text-align: left;">${typeII_3Analysis.desc}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <p style="font-size:0.9em; color:#555; margin-top:10px; text-align: left;">${typeII_3Analysis.detail}</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  `;
Â  Â  
Â  Â  // III. 5æ®µéšè©•ä¾¡ã®è¡¨ç¤º (A, B, C ã®3è»¸)
Â  Â  chartsArea.querySelector('.chart-title').textContent = "ã€è¨ºæ–­ IIIã€‘3ã¤ã®è©³ç´°æ€§æ ¼ 5æ®µéšè©•ä¾¡";
Â  Â  renderStarRatings(results.radar, starRatingsContainer);

Â  Â  // çµæœè¡¨ç¤ºé †åºã®ä¿®æ­£ (DOMæ“ä½œ: I -> II-1, II-2, II-3 -> III ã®é †)
Â  Â  const nextSibling = analysisArea.nextElementSibling;
Â  Â  resultContainer.insertBefore(chartsArea, nextSibling);


Â  Â  // V. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®è¡¨ç¤º
Â  Â  btnArea.innerHTML = `
Â  Â  Â  Â  <button onclick="location.reload()" class="action-btn reload-btn">
Â  Â  Â  Â  Â  Â  ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button onclick="shareOnX(results)" class="action-btn share-btn">
Â  Â  Â  Â  Â  Â  è¨ºæ–­çµæœã‚’Xã«æŠ•ç¨¿ã™ã‚‹
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button onclick="window.open('https://note.com/alc_chron2025', '_blank')" class="action-btn note-btn">
Â  Â  Â  Â  Â  Â  åˆ¶ä½œè€…noteãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
Â  Â  Â  Â  </button>
Â  Â  `;
}


/* =====================
Â * 3. è¤‡åˆå‹åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ (å¤‰æ›´ãªã—)
Â * ===================== */
// ã‚¹ã‚³ã‚¢ã‚’â˜…5æ®µéšè©•ä¾¡ã«å¤‰æ›
function scoreToStars(score) {
Â  Â  const starRating = (score + 10) / 4;
Â  Â  return Math.max(0, Math.min(5, starRating)); 
}

// â˜…å°æ–‡å­—åˆ—ã‚’ç”Ÿæˆ
function getStarString(starRating) {
Â  Â  const fullStar = 'â˜…'; 
Â  Â  const emptyStar = 'â˜†'; 
Â  Â  const roundedStars = Math.round(starRating);
Â  Â  return fullStar.repeat(roundedStars) + emptyStar.repeat(5 - roundedStars);
}

// è¨ºæ–­ III ã®çµæœã‚’â˜…5æ®µéšè©•ä¾¡ã¨ã—ã¦HTMLã«æç”»ã™ã‚‹ (å¤‰æ›´ãªã—)
function renderStarRatings(scores, container) {
Â  Â  let html = '';
Â  Â  const displayKeys = Object.keys(radarMapName);

Â  Â  displayKeys.forEach(key => {
Â  Â  Â  Â  const score = scores[key];
Â  Â  Â  Â  const starRating = scoreToStars(score);
Â  Â  Â  Â  const starString = getStarString(starRating);
Â  Â  Â  Â  
Â  Â  Â  Â  html += `
Â  Â  Â  Â  Â  Â  <div class="trait-item">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="trait-name">${radarMapName[key]}</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="stars" title="${score} / 10ç‚¹">${starString}</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  `;
Â  Â  });
Â  Â  container.innerHTML = html;
}

// Xã¸ã®å…±æœ‰æ©Ÿèƒ½ (å¤‰æ›´ãªã—)
function shareOnX(results) {
Â  Â  const topKeys = Object.keys(results.radar).sort((key1, key2) => results.radar[key2] - results.radar[key1]);
Â  Â  const topTrait = radarMapName[topKeys[0]] || "ãƒ‡ãƒ¼ã‚¿ãªã—";
Â  Â  const topScore = results.radar[topKeys[0]] || 0;
Â  Â  const matrixAnalysis = getMatrixAnalysis(results.matrix.X, results.matrix.Y);
Â  Â  const individualAnalysis = getTypeII_1Analysis(results.typeII_1);

Â  Â  const tweetText = `
ã€ç­†è·¡è¨ºæ–­çµæœã€‘

ã‚¿ã‚¤ãƒ—I (è¡Œå‹•ç‰¹æ€§)ï¼šã€${matrixAnalysis.name}ã€
ã‚¿ã‚¤ãƒ—II-1 (è²¬ä»»æ„Ÿ)ï¼šã€${individualAnalysis.name}ã€
//ğŸ–Šï¸ æœ€ã‚‚é«˜ã„ç‰¹æ€§ã¯ã€Œ${topTrait}ã€(${topScore}/10ç‚¹)

ã‚ãªãŸã®ç­†è·¡å‚¾å‘ã‚‚è¨ºæ–­ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ
#ç­†è·¡è¨ºæ–­ #æ€§æ ¼è¨ºæ–­ #ã‚°ãƒ©ãƒ•ã‚©ãƒ­ã‚¸ãƒ¼
[ã“ã“ã«ã‚¢ãƒ—ãƒªã®URLã‚’è¨˜è¿°ã—ã¦ãã ã•ã„]
Â  Â  `.trim();

Â  Â  const encodedText = encodeURIComponent(tweetText);
Â  Â  const url = `https://twitter.com/intent/tweet?text=${encodedText}`;
Â  Â  window.open(url, '_blank');
}


// è¨ºæ–­ I: è¡Œå‹•ç‰¹æ€§ãƒãƒˆãƒªã‚¯ã‚¹ (å¤‰æ›´ãªã—)
function getMatrixAnalysis(xScore, yScore) {
Â  Â  const isHighX = xScore > 0.3; 
Â  Â  const isLowX = xScore < -0.3;
Â  Â  const isHighY = yScore > 0.3;
Â  Â  const isLowY = yScore < -0.3;

Â  Â  if (isHighX && isHighY) {
Â  Â  Â  Â  return { name: "åŠ›å¼·ã„é–‹æ‹“è€…", desc: "è‡ªå·±ä¸»å¼µãŒå¼·ãã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«æº¢ã‚Œã¦ã„ã¾ã™ã€‚ãƒãƒ¼ãƒ ã‚’å¼•ã£å¼µã‚Šã€æˆæœã‚’å‡ºã™ã“ã¨ã«å–œã³ã‚’æ„Ÿã˜ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚", detail: "å¤§ããªæ–‡å­—ã¨å¼·ã„ç­†åœ§ã®æŒã¡ä¸»ã€‚æŒ‡ç¤ºã‚’å¾…ãŸãšè¡Œå‹•ã«ç§»ã›ã¾ã™ãŒã€ç´°éƒ¨ã¸ã®é…æ…®ã‚’å¿˜ã‚Œãšã«ã€‚" };
Â  Â  } else if (isLowX && isHighY) {
Â  Â  Â  Â  return { name: "æŸ”å’Œãªèª¿æ•´è€…", desc: "ä¸»å¼µã¯æ˜ç¢ºã§ã™ãŒã€è¡Œå‹•ã¯æ…é‡ã§ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ¸©å­˜ã—ã¾ã™ã€‚æˆ¦ç•¥ã‚„ä¼ç”»ç«‹æ¡ˆã«å¼·ã¿ã‚’ç™ºæ®ã™ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚", detail: "å¤§ããªæ–‡å­—ã¨æ§ãˆã‚ãªç­†åœ§ã®æŒã¡ä¸»ã€‚å†…çœçš„ã§ã™ãŒã€ç‹¬è‡ªã®è¦–ç‚¹ã‚’æŒã£ã¦ã„ã¾ã™ã€‚è¨ˆç”»å€’ã‚Œã«ãªã‚‰ãªã„ã‚ˆã†æ³¨æ„ã€‚" };
Â  Â  } else if (isLowX && isLowY) {
Â  Â  Â  Â  return { name: "æ€æ…®æ·±ã„è¦³å¯Ÿè€…", desc: "æ§ãˆã‚ã§ã€å‘¨å›²ã¨ã®èª¿å’Œã‚’é‡è¦–ã—ã¾ã™ã€‚ã‚µãƒãƒ¼ãƒˆå½¹ã¨ã—ã¦ã€ç’°å¢ƒã®å®‰å®šåŒ–ã«è²¢çŒ®ã™ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚", detail: "å°ã•ãªæ–‡å­—ã¨å¼±ã„ç­†åœ§ã®æŒã¡ä¸»ã€‚ç¸ã®ä¸‹ã®åŠ›æŒã¡ã§ã™ãŒã€æ™‚ã«è‡ªå·±ä¸»å¼µã‚’ã™ã‚‹ã“ã¨ã‚‚å¤§åˆ‡ã§ã™ã€‚" };
Â  Â  } else if (isHighX && isLowY) {
Â  Â  Â  Â  return { name: "ç·»å¯†ãªæ¢æ±‚è€…", desc: "è‡ªå·±ä¸»å¼µã¯æ§ãˆã‚ãªãŒã‚‰ã€å®Ÿå‹™çš„ãªè¡Œå‹•åŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚é»™ã€…ã¨ã‚¿ã‚¹ã‚¯ã‚’ã“ãªã™è·äººæ°—è³ªã®ã‚¿ã‚¤ãƒ—ã§ã™ã€‚", detail: "å°ã•ãªæ–‡å­—ã¨å¼·ã„ç­†åœ§ã®æŒã¡ä¸»ã€‚ç›®æ¨™é”æˆã¸ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ã‚ã‚Šã¾ã™ãŒã€è‡ªåˆ†ã®æ„è¦‹ã‚’å‡ºã™è¨“ç·´ãŒå¿…è¦ã§ã™ã€‚" };
Â  Â  } else {
Â  Â  Â  Â  return { name: "å¹³å‡çš„ãªå®Ÿè·µè€…", desc: "ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨è‡ªå·±ä¸»å¼µã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã¾ã™ã€‚ç’°å¢ƒã‚„ç›¸æ‰‹ã«å¿œã˜ã¦æŸ”è»Ÿã«å¯¾å¿œã§ãã‚‹å¹³å‡çš„ãªã‚¿ã‚¤ãƒ—ã§ã™ã€‚", detail: "æ¥µç«¯ãªå‚¾å‘ãŒãªãã€å”èª¿çš„ã§ã™ã€‚çŠ¶æ³ã‚’èª­ã‚“ã§ã€ã©ã®ç‰¹æ€§ã‚’å‡ºã™ã‹æ„è­˜çš„ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã¾ã—ã‚‡ã†ã€‚" };
Â  Â  }
}

// renderMatrixCharté–¢æ•°ã®å®Ÿè£… (å¤‰æ›´ãªã—)
function renderMatrixChart(xScore, yScore, canvasId) {
Â  Â  const ctx = document.getElementById(canvasId).getContext('2d');
Â  Â  
Â  Â  if (window.matrixChartInstance) {
Â  Â  Â  Â  window.matrixChartInstance.destroy();
Â  Â  }
Â  Â  
Â  Â  window.matrixChartInstance = new Chart(ctx, { 
Â  Â  Â  Â  type: 'scatter',
Â  Â  Â  Â  data: {
Â  Â  Â  Â  Â  Â  datasets: [{
Â  Â  Â  Â  Â  Â  Â  Â  label: 'ã‚ãªãŸã®ä½ç½®',
Â  Â  Â  Â  Â  Â  Â  Â  data: [{ x: xScore, y: yScore }],
Â  Â  Â  Â  Â  Â  Â  Â  backgroundColor: 'rgba(60, 76, 231, 0.7)', 
Â  Â  Â  Â  Â  Â  Â  Â  borderColor: 'rgba(255, 255, 255, 0.7)',
Â  Â  Â  Â  Â  Â  Â  Â  pointRadius: 18, 
Â  Â  Â  Â  Â  Â  Â  Â  pointHoverRadius: 24,
Â  Â  Â  Â  Â  Â  }]
Â  Â  Â  Â  },
Â  Â  Â  Â  options: {
Â  Â  Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  Â  Â  maintainAspectRatio: true, 
Â  Â  Â  Â  Â  Â  aspectRatio: 1,
Â  Â  Â  Â  Â  Â  plugins: {
Â  Â  Â  Â  Â  Â  Â  Â  legend: { display: false },
Â  Â  Â  Â  Â  Â  Â  Â  tooltip: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  callbacks: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  label: (context) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return `X: ${context.parsed.x} / Y: ${context.parsed.y}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  scales: {
Â  Â  Â  Â  Â  Â  Â  Â  x: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'linear',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  position: 'bottom',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  min: -1, 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  max: 1, Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid: { borderColor: '#000', borderWidth: 1, color: (context) => context.tick.value === 0 ? '#aaa' : 'rgba(0,0,0,0.1)' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title: { display: true, text: `â—€ ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ»å®Ÿè¡ŒåŠ› â–¶ï¸`, font: { weight: 'bold' } }, 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ticks: { stepSize: 1 }
Â  Â  Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  Â  Â  y: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: 'linear',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  position: 'left',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  min: -1, 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  max: 1, Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  grid: { borderColor: '#000', borderWidth: 1, color: (context) => context.tick.value === 0 ? '#aaa' : 'rgba(0,0,0,0.1)' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title: { display: true, text: `â—€ è‡ªå·±ä¸»å¼µãƒ»è¡¨ç¾åŠ› â–¶ï¸`, font: { weight: 'bold' } }, 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ticks: { stepSize: 1 }
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  });
}


// è¨ºæ–­ II-1: Q3 (æ§˜) (å¤‰æ›´ãªã—)
function getTypeII_1Analysis(typeIndex) {
Â  Â  const types = [
Â  Â  Â  Â  { name: "ğŸ”¥å¼·å›ºãªã‚³ãƒŸãƒƒãƒˆå‹", desc: "ç›®æ¨™é”æˆã¸ã®è²¬ä»»æ„ŸãŒå¼·ã„å®Ÿè¡Œè€…", detail: "ç›®æ¨™é”æˆã®ãŸã‚ã«è‡ªã‚‰ç©æ¥µçš„ã«å‹•ãã€å›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã‚‹è²¬ä»»æ„Ÿã‚’æŒã£ã¦ã„ã¾ã™ã€‚åé¢ã€å‘¨ã‚Šã®æ„è¦‹ã‚’é¡§ã¿ãªã„ç‹¬èµ°å‚¾å‘ã‚‚ã€‚" }, 
Â  Â  Â  Â  { name: "ğŸ¤å”èª¿çš„ã‚µãƒãƒ¼ãƒˆå‹", desc: "å‘¨å›²ã¨ã®èª¿å’Œã‚’é‡ã‚“ã˜ã‚‹è²¬ä»»æ„Ÿ", detail: "è¡¨ç«‹ã£ã¦è²¬ä»»ã‚’è² ã†ã‚ˆã‚Šã€çµ„ç¹”ã‚„ãƒªãƒ¼ãƒ€ãƒ¼ã‚’æ”¯ãˆã‚‹ã“ã¨ã§è²¬ä»»ã‚’æœãŸãã†ã¨ã—ã¾ã™ã€‚èª¿æ•´å½¹ã¨ã—ã¦ã®èƒ½åŠ›ãŒé«˜ã„ã§ã™ã€‚" }, 
Â  Â  Â  Â  { name: "ğŸŒåŒ…æ‘‚çš„ãªè²¬ä»»å‹", desc: "ä»–è€…ã¸ã®å¯›å®¹ã•ã‚’æŒã¤å¤§ããªè²¬ä»»æ„Ÿ", detail: "ãƒãƒ¼ãƒ å…¨ä½“ã‚„ä»²é–“ã‚’åºƒã„å¿ƒã§å—ã‘æ­¢ã‚ã€åŒ…æ‹¬çš„ã«è²¬ä»»ã‚’è² ãŠã†ã¨ã—ã¾ã™ã€‚ãŠãŠã‚‰ã‹ã§å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã¾ã™ã€‚" }, 
Â  Â  Â  Â  { name: "ğŸ‘¤è‡ªå·±å®Œçµå‹", desc: "è‡ªåˆ†ã®é ˜åŸŸã«ã®ã¿å¼·ã„è²¬ä»»ã‚’æŒã¤è·äºº", detail: "ä»–è€…ã®ä»‹å…¥ã‚’å«Œã„ã€è‡ªåˆ†ã®èˆˆå‘³ã‚„å°‚é–€åˆ†é‡ã«å¯¾ã—ã¦ã¯éå¸¸ã«å¼·ã„è²¬ä»»æ„Ÿã‚’æŒã¡ã¾ã™ãŒã€ãã‚Œä»¥å¤–ã®é ˜åŸŸã¯å‰²ã‚Šåˆ‡ã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚" }, 
Â  Â  Â  Â  { name: "ğŸ›¡ï¸è¦ç¯„éµå®ˆå‹", desc: "ãƒ«ãƒ¼ãƒ«ã¨ç´„æŸã‚’å®ˆã‚‹å …å®Ÿãªè²¬ä»»æ„Ÿ", detail: "ä¼çµ±ã‚„å½¢å¼ã‚’é‡ã‚“ã˜ã€ä¸€åº¦æ±ºã‚ãŸãƒ«ãƒ¼ãƒ«ã‚„ç´„æŸã¯å³æ ¼ã«å®ˆã‚ŠæŠœã“ã†ã¨ã—ã¾ã™ã€‚åé¢èé€šãŒãã‹ãªã„ã¨ã“ã‚ãŒã‚ã‚‹ã€‚" }, 
Â  Â  Â  Â  { name: "ğŸ’§æŸ”è»Ÿãƒ»æµå‹•å‹", desc: "å¯¾äººé…æ…®ã‚†ãˆã«è²¬ä»»ã®ç·šå¼•ããŒæ›–æ˜§", detail: "å‘¨å›²ã®çŠ¶æ³ã‚„æ„Ÿæƒ…ã«é…æ…®ã—ã™ãã‚‹ãŸã‚ã€è²¬ä»»ã‚’è² ã†ã¹ãå ´é¢ã§ä¸€æ­©å¼•ã„ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å„ªã—ã•ã‚†ãˆã®å„ªæŸ”ä¸æ–­ã•ã§ã™ã€‚" } 
Â  Â  ];
Â  Â  return types[typeIndex] || { name: "æœªå›ç­”", desc: "è¨ºæ–­II-1ãŒæœªå›ç­”ã®ãŸã‚ã€åˆ†æã§ãã¾ã›ã‚“ã§ã—ãŸã€‚", detail: "ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹ãƒœã‚¿ãƒ³ã‹ã‚‰ã€å…¨å•å›ç­”ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚" };
}

// è¨ºæ–­ II-2: Q5 (æœ¨) (å¤‰æ›´ãªã—)
function getTypeII_2Analysis(typeIndex) {
    const types = [
        { name: "è¯ã‚„ã‹ãªè‡ªå·±é¡•ç¤ºå‹", desc: "è¯ã‚„ã‹ã•ãŒã‚ã‚Šã€å¼·ã„è‡ªå·±é¡•ç¤ºæ¬²ã‚’æŒã¤å¤–å‘çš„ãªã‚¿ã‚¤ãƒ—ã€‚", detail: "æ¨é€²åŠ›ã¨è¡Œå‹•åŠ›ãŒã‚ã‚Šã¾ã™ãŒã€å‘¨å›²ã¸ã®é…æ…®ã‚’æ¬ ãã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚" }, 
        { name: "å‡è¡¡ã®å–ã‚ŒãŸèª¿å’Œå‹", desc: "è‡ªå·±é¡•ç¤ºã¨ç†±ä¸­ã®ãƒãƒ©ãƒ³ã‚¹ãŒè‰¯ãã€å®‰å®šæ„Ÿã®ã‚ã‚‹ã‚¿ã‚¤ãƒ—ã€‚", detail: "å”èª¿æ€§ãŒé«˜ãã€éåº¦ãªã®ã‚ã‚Šè¾¼ã¿ã‚„éåº¦ãªè‡ªå·±ä¸»å¼µã‚’ã—ã¾ã›ã‚“ã€‚" }, 
        { name: "æ·±ã„ç†±ä¸­ãƒ»ã®ã‚ã‚Šè¾¼ã¿å‹", desc: "å¼·ã„é›†ä¸­åŠ›ã§ç‰©äº‹ã«æ·±ãã®ã‚ã‚Šè¾¼ã‚€å†…çœçš„ãªã‚¿ã‚¤ãƒ—ã€‚", detail: "æ¢ç©¶å¿ƒãŒæ·±ãã€é©šãã¹ãæˆæœã‚’å‡ºã™ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ãŒã€å‘¨å›²ãŒè¦‹ãˆãªããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚" } 
    ];
    return types[typeIndex] || { name: "æœªå›ç­”", desc: "è¨ºæ–­II-2ãŒæœªå›ç­”ã®ãŸã‚ã€åˆ†æã§ãã¾ã›ã‚“ã§ã—ãŸã€‚", detail: "" };
}

// è¨ºæ–­ II-3: Q7 (é‡) (å¤‰æ›´ãªã—)
function getTypeII_3Analysis(typeIndex) {
    const types = [
        { name: "è«–ç†çš„åˆ¤æ–­å‹", desc: "æƒ…å ±ã‚’æ•´ç†ã—ã€ç­‹é“ã‚’ç«‹ã¦ã¦è«–ç†çš„ã«åˆ¤æ–­ã™ã‚‹å‚¾å‘ãŒå¼·ã„ã€‚", detail: "å®¢è¦³çš„ãªæ ¹æ‹ ã«åŸºã¥ãæ­£ç¢ºãªæ„æ€æ±ºå®šãŒå¾—æ„ã§ã™ã€‚" }, 
        { name: "ç›´æ„Ÿçš„åˆ¤æ–­å‹", desc: "ç¬æ™‚ã®ã²ã‚‰ã‚ãã‚„ç›´æ„Ÿã‚’é‡è¦–ã—ã¦åˆ¤æ–­ã™ã‚‹å‚¾å‘ãŒå¼·ã„ã€‚", detail: "çŠ¶æ³ã‚’ç¬æ™‚ã«æŠŠæ¡ã—ã€æŸ”è»Ÿã§ã‚¹ãƒ”ãƒ¼ãƒ‡ã‚£ãªæ„æ€æ±ºå®šãŒå¾—æ„ã§ã™ã€‚" } 
    ];
    return types[typeIndex] || { name: "æœªå›ç­”", desc: "è¨ºæ–­II-3ãŒæœªå›ç­”ã®ãŸã‚ã€åˆ†æã§ãã¾ã›ã‚“ã§ã—ãŸã€‚", detail: "" };
}
</script>

</body>
</html>