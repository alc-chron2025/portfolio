<<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¤¾ä¼šäººåŸºç¤åŠ›è¨ºæ–­ãƒã‚§ãƒƒã‚¯</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    #startScreen {
      text-align: center;
      padding: 30px;
      max-width: 600px;
      margin: 0 auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    #startBtn {
      background-color: #007bff;
      color: #fff;
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }


    #chat-container {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    .question-block {
      margin-bottom: 20px;
    }
    .options-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    .option-btn {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #fff;
      cursor: pointer;
      text-align: left;
    }
    .option-btn.selected {
      background: #1dbfff86;
      border: 0.5px #007BFF;
      color: #000;
    }
    .none-btn {
      text-align: center;
      font-weight: bold;
      background-color: #ddd;
    }
    .next-btn, .restart-btn {
      display: block;
      width: 100%;
      padding: 10px;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 15px;
    }
    button:hover {
      opacity: 0.8;
      background: #0073ffe2;
      color: #fff;
    }
    .result {
      white-space: pre-line;
      margin-bottom: 20px;
    }
    .action-btn {
  display: block;
  width: 340px;
  max-width: 90%;
  margin: 10px auto;
  padding: 10px;
  border-radius: 8px;
  font-size: 16px;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  box-sizing: border-box;
  transition: background-color 0.3s;
}

/* Xã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³ */
.share-btn {
  background-color: #1DA1F2;
  color: #fff;
  font-weight: bold;
}
.share-btn:hover {
  background-color: #0d8ddb;
}

.share-btn a {
  display: inline-block;
  background-color: #1da1f2;
  border: 0.5px solid #6600ff;
  color: #fff;
  padding: 10px 20px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: bold;
}

/* å†è¨ºæ–­ãƒœã‚¿ãƒ³ */
.ghost {
  background-color: #333;
  border: 0.5px solid #666;
  color: #fff;
}
.ghost:hover {
  background-color: #000;
}

/* noteãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ */
.note-btn {
  background-color: #f5f5f5;
  border: 0.5px solid #666;
  color: #000;
}
.note-btn:hover {
  background-color: #eaeaea;
}
  </style>
</head>
<body>

  <div id="startScreen">
    <h2>ç¤¾ä¼šäººåŸºç¤åŠ›ãƒã‚§ãƒƒã‚¯</h2>
    <p>ã‚ãªãŸã®ç¤¾ä¼šäººåŸºç¤åŠ›ï¼ˆ12ç¨®é¡ï¼‰ã‚’3ã¤ã®è¦³ç‚¹ã‹ã‚‰æ¸¬å®šã—ã¾ã™ã€‚<br>
    çµæœã¯ã‚°ãƒ©ãƒ•ã§è¡¨ç¤ºã•ã‚Œã€è‡ªå·±åˆ†æã‚„ã‚­ãƒ£ãƒªã‚¢å½¢æˆã«æ´»ã‹ã›ã¾ã™ã€‚</p><br>
    
      <p>
      æ‰€è¦æ™‚é–“ 5åˆ†ç¨‹åº¦<br>
      è³ªå•æ•° 15å•<br><br>
      </p><br>
      <p>
      æœ€åˆã®12å•ã¯<strong>ã‚ã¦ã¯ã¾ã‚‹ã‚‚ã®ã‚’ã™ã¹ã¦é¸æŠ</strong>ã—ã¦å›ç­”ã—ã¦ãã ã•ã„ã€‚<br><br>
      </p><br>      
    
    <button id="startBtn">ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    <p>â€»ç›´æ„Ÿã§å›ç­”ã—ã¦ãã ã•ã„</p>
  </div>

  <div id="chat-container" style="display: none;"></div>
  <div id="result-buttons" style="margin-top: 20px;"></div>

<script>
    const startScreen = document.getElementById('startScreen');
    const chatContainer = document.getElementById('chat-container');
    const startBtn = document.getElementById('startBtn');

    startBtn.addEventListener('click', () => {
      startScreen.style.display = 'none';
      chatContainer.style.display = 'block';
      showQuestion(currentQuestion); // è³ªå•è¡¨ç¤ºé–‹å§‹
    });



// è¨ºæ–­è¨­å•ãƒ‡ãƒ¼ã‚¿
    // ======== è¨­å•ãƒ‡ãƒ¼ã‚¿ ========
    const QUESTIONS = [
      {
        category: "action",
        id: "A",
        title: "å‰ã«è¸ã¿å‡ºã™åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ã‚ãªãŸãŒã‚ˆãå–ã‚‹è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ï¼Ÿ",
        options: [
          { text: "èºŠèº‡ã›ãšã«è¡Œå‹•ã«ç§»ã™", score: 1 },
          { text: "è‡ªå·±å•“ç™ºã«ç©æ¥µçš„ã«å–ã‚Šçµ„ã‚€", score: 1 },
          { text: "ä»–äººã‚ˆã‚Šå…ˆã«è‡ªåˆ†ã‚’æ‰“ã¡å‡ºã™", score: 1 },
          { text: "ä½•äº‹ã‚‚è‡ªåˆ†ã”ã¨ã¨ã—ã¦å—ã‘æ­¢ã‚ã‚‹", score: 1 },
          { text: "æŒ‡ç¤ºã‚’å¾…ãŸãšã€è‡ªåˆ†ã§ã‚„ã‚‹ã¹ãã“ã¨ã‚’è¦‹ã¤ã‘ã¦å‹•ã", score: 1 }
        ]
      },
      {
        category: "action",
        id: "B",
        title: "åƒãã‹ã‘åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ãƒãƒ¼ãƒ å†…ã§ã®ã‚ãªãŸã®ãƒ¡ãƒ³ãƒãƒ¼ã«å¯¾ã™ã‚‹é–¢ã‚ã‚Šæ–¹ã¯ï¼Ÿ",
        options: [
          { text: "å‘¨å›²ã«å£°ã‚’ã‹ã‘ã¦å·»ãè¾¼ã‚€", score: 1 },
          { text: "æ„è¦‹ã®å°‘ãªã„äººã®ç™ºè¨€ã‚’ä¿ƒã™", score: 1 },
          { text: "è‡ªåˆ†ã®ç›®æ¨™ã‚ˆã‚Šå…¨ä½“ã®èª¿æ•´ã‚’å„ªå…ˆ", score: 1 },
          { text: "ä»–äººã‚’ç›®æ¨™ã«é›†ä¸­ã•ã›ã‚‹", score: 1 },
          { text: "æ”»æ’ƒçš„ãªè¨€å‹•ã¯é¿ã‘ã¦ã„ã‚‹", score: 1 }
        ]
      },
      {
        category: "action",
        id: "C",
        title: "å®Ÿè¡ŒåŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ã‚ãªãŸã®è¡Œå‹•ã‚¹ã‚¿ã‚¤ãƒ«ã¯ï¼Ÿ",
        options: [
          { text: "è‡ªåˆ†ã§ç›®æ¨™ã‚’ç«‹ã¦ã¦ç²˜ã‚Šå¼·ãå–ã‚Šçµ„ã‚€", score: 1 },
          { text: "ç–²ã‚Œã‚’è¦‹ã›ãšã«è¡Œå‹•ã—ç¶šã‘ã‚‹", score: 1 },
          { text: "ã‚¹ãƒ”ãƒ¼ãƒ‰æ„Ÿã‚’æŒã£ã¦å‹•ã", score: 1 },
          { text: "ç°¡å˜ã«è«¦ã‚ãªã„", score: 1 },
          { text: "è¨€ã‚ã‚ŒãŸã“ã¨ä»¥ä¸Šã®ã“ã¨ã‚’ã‚„ã‚‹", score: 1 }
        ]
      },
      {
        category: "thinking",
        id: "D",
        title: "èª²é¡Œç™ºè¦‹åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘å•é¡Œã«ç›´é¢ã—ãŸã¨ãã®ã‚ãªãŸã®æ€è€ƒã¯ï¼Ÿ",
        options: [
          { text: "åŸå› ã‚’æ˜ã‚Šä¸‹ã’ã¦æœ¬è³ªã‚’æ¢ã‚‹", score: 1 },
          { text: "ã‚ã‚‹ã¹ãå§¿ã¨ã®ã‚®ãƒ£ãƒƒãƒ—ã‚’æ„è­˜ã™ã‚‹", score: 1 },
          { text: "ç¾è±¡ã ã‘ã§ãªãå†…åœ¨ã™ã‚‹åŸå› ã‚’è€ƒãˆã‚‹", score: 1 },
          { text: "é˜»å®³è¦å› ã‚’æŠŠæ¡ã—ã¦æ’é™¤ã«å‹•ã", score: 1 },
          { text: "ãªãœãã†ãªã£ã¦ã„ã‚‹ã‹ã‚’å¸¸ã«è€ƒãˆã‚‹", score: 1 }
        ]
      },
      {
        category: "thinking",
        id: "E",
        title: "è¨ˆç”»åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ç›®æ¨™é”æˆã«å‘ã‘ãŸæº–å‚™ã§ã€ã‚ãªãŸãŒæ„è­˜ã—ã¦ã„ã‚‹ã“ã¨ã¯ï¼Ÿ",
        options: [
          { text: "é“ç­‹ã‚’ç«‹ã¦ã¦é€²è¡Œæ‰‹é †ã‚’æ˜ç¢ºã«ã™ã‚‹", score: 1 },
          { text: "æ™‚é–“é…åˆ†ã‚„å½¹å‰²åˆ†æ‹…ã‚’äº‹å‰ã«è€ƒãˆã‚‹", score: 1 },
          { text: "é€²æ—ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ä½“åˆ¶ã‚’æ•´ãˆã‚‹", score: 1 },
          { text: "æœ€å–„ã®ãƒ—ãƒ­ã‚»ã‚¹ã®è¤‡æ•°æ¡ˆã‚’æ¤œè¨ã™ã‚‹", score: 1 },
          { text: "å¸¸ã«ç›®æ¨™ã¨ã®è·é›¢ã‚’æ„è­˜ã™ã‚‹", score: 1 }
        ]
      },
      {
        category: "thinking",
        id: "F",
        title: "å‰µé€ åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘èª²é¡Œã«å–ã‚Šçµ„ã‚€ã¨ãã€ã‚ãªãŸã®ç™ºæƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã¯ï¼Ÿ",
        options: [
          { text: "æ—¢æˆæ¦‚å¿µã«ã¨ã‚‰ã‚ã‚Œãšè‡ªç”±ã«è€ƒãˆã‚‹", score: 1 },
          { text: "è¤‡æ•°ã®è€ƒãˆã‚’çµ±åˆã—ã¦æ–°ã—ã„è¦–ç‚¹ã‚’ç”Ÿã‚€", score: 1 },
          { text: "æ…£ç¿’ã«ç¸›ã‚‰ã‚Œãšå¤‰é©ã‚’ç›®æŒ‡ã™", score: 1 },
          { text: "æ™‚ä»£ã®å¤‰åŒ–ã‚’å…ˆå–ã‚Šã—ã¦é©æ–°ã‚’èµ·ã“ã™", score: 1 },
          { text: "ä»–äººã®è€ƒãˆã‚’ãƒ’ãƒ³ãƒˆã«æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç”Ÿã¿å‡ºã™", score: 1 }
        ]
      },
      {
        category: "teamwork",
        id: "G",
        title: "ç™ºä¿¡åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ã‚ãªãŸãŒæ„è¦‹ã‚’ä¼ãˆã‚‹ã¨ãã€æ„è­˜ã—ã¦ã„ã‚‹ã“ã¨ã¯ï¼Ÿ",
        options: [
          { text: "ç°¡æ½”ã«è¦ç‚¹ã‚’ã¾ã¨ã‚ã¦è©±ã™", score: 1 },
          { text: "æ°—æŒã¡ã‚’è¾¼ã‚ã¦èª¬å¾—åŠ›ã‚’æŒãŸã›ã‚‹", score: 1 },
          { text: "ç›¸æ‰‹ã«ç†è§£ã•ã‚Œã‚‹ã‚ˆã†ã«æ•´ç†ã—ã¦ä¼ãˆã‚‹", score: 1 },
          { text: "æ˜ç­ãªç™ºéŸ³ã§ã‚¹ãƒ ãƒ¼ã‚ºã«è©±ã™", score: 1 },
          { text: "ç›¸æ‰‹ã«è¦–ç·šã‚’å‘ã‘ã¦è©±ã™", score: 1 }
        ]
      },
      {
        category: "teamwork",
        id: "H",
        title: "å‚¾è´åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ç›¸æ‰‹ã®è©±ã‚’èãã¨ãã€ã‚ãªãŸãŒæ„è­˜ã—ã¦ã„ã‚‹ã“ã¨ã¯ï¼Ÿ",
        options: [
          { text: "è©±ã—ã‚„ã™ã„ç’°å¢ƒã‚’ã¤ãã‚‹", score: 1 },
          { text: "ç›¸æ‰‹ã®æ°—æŒã¡ã‚’å…¨èº«ã§å—ã‘æ­¢ã‚ã‚‹", score: 1 },
          { text: "æœ€å¾Œã¾ã§è©±ã‚’é®ã‚‰ãšã«èã", score: 1 },
          { text: "è¦æ—¨ã‚’ç¢ºèªã—ãªãŒã‚‰ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã™ã‚‹", score: 1 },
          { text: "é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è³ªå•ã—ã¦æ„è¦‹ã‚’å¼•ãå‡ºã™", score: 1 }
        ]
      },
      {
        category: "teamwork",
        id: "I",
        title: "æŸ”è»Ÿæ€§",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘æ„è¦‹ã®é•ã„ã‚„ç«‹å ´ã®é•ã„ã«ç›´é¢ã—ãŸã¨ãã€ã‚ãªãŸã¯ã©ã†å¯¾å¿œã—ã¾ã™ã‹ï¼Ÿ",
        options: [
          { text: "ç›¸æ‰‹ã®ç«‹å ´ã‚’å°Šé‡ã—ã¦ç†è§£ã—ã‚ˆã†ã¨ã™ã‚‹", score: 1 },
          { text: "çŠ¶æ³ã«å¿œã˜ã¦æ¥ã—æ–¹ã‚’å¤‰ãˆã‚‹", score: 1 },
          { text: "ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ç´ ç›´ã«å—ã‘å…¥ã‚Œã‚‹", score: 1 },
          { text: "è‡ªåˆ†ã®ãƒ«ãƒ¼ãƒ«ã«ã“ã ã‚ã‚‰ãªã„", score: 1 },
          { text: "è‡ªåˆ†ã®æ¡ˆã«å›ºåŸ·ã›ãšã€ã‚ˆã‚Šè‰¯ã„æ¡ˆã‚’å—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹", score: 1 }
        ]
      },
      {
        category: "teamwork",
        id: "J",
        title: "çŠ¶æ³æŠŠæ¡åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ãƒãƒ¼ãƒ ã§åƒãã¨ãã€ã‚ãªãŸãŒæ„è­˜ã—ã¦ã„ã‚‹ã“ã¨ã¯ï¼Ÿ",
        options: [
          { text: "è‡ªåˆ†ã®å½¹å‰²ã‚’ç†è§£ã—ã¦è¡Œå‹•ã™ã‚‹", score: 1 },
          { text: "è‡ªåˆ†ã®ç™ºè¨€ãŒå‘¨å›²ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’è€ƒãˆã‚‹", score: 1 },
          { text: "ã‚°ãƒ«ãƒ¼ãƒ—å…¨ä½“ã«æ°—ã‚’é…ã‚‹", score: 1 },
          { text: "åˆ©å·±çš„ãªæ…‹åº¦ã‚’ã¨ã‚‰ãªã„", score: 1 },
          { text: "å…¨ä½“ã¸ã®å½±éŸ¿ã‚’æ„è­˜ã—ã¦è¡Œå‹•ã™ã‚‹", score: 1 }
        ]
      },
      {
        category: "teamwork",
        id: "K",
        title: "è¦å¾‹æ€§",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ã‚ãªãŸãŒãƒ«ãƒ¼ãƒ«ã‚„ç´„æŸã«å¯¾ã—ã¦æ„è­˜ã—ã¦ã„ã‚‹ã“ã¨ã¯ï¼Ÿ",
        options: [
          { text: "ç¤¾ä¼šã®ãƒ«ãƒ¼ãƒ«ã«å‰‡ã£ã¦è¡Œå‹•ã™ã‚‹", score: 1 },
          { text: "æ³•ã‚„è¦å‰‡ã‚’å®ˆã£ã¦ä¿¡ç”¨ã‚’ç¶­æŒã™ã‚‹", score: 1 },
          { text: "å€«ç†è¦³ã‚’æŒã£ã¦å…¬æ­£ã«å¯¾å¿œã™ã‚‹", score: 1 },
          { text: "æ™‚é–“ã‚„ç´„æŸã‚’å®ˆã‚‹", score: 1 },
          { text: "æ±ºã‚ã‚‰ã‚ŒãŸã“ã¨ã«ã¯ç´ ç›´ã«å¾“ã†", score: 1 }
        ]
      },
      {
        category: "teamwork",
        id: "L",
        title: "ã‚¹ãƒˆãƒ¬ã‚¹ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«åŠ›",
        type: "multi",
        text: "ã€è¤‡æ•°é¸æŠå¯ã€‘ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ„Ÿã˜ãŸã¨ãã€ã‚ãªãŸã®å¯¾å¿œã«è¿‘ã„ã‚‚ã®ã¯ï¼Ÿ",
        options: [
          { text: "æˆé•·ã®æ©Ÿä¼šã ã¨å‰å‘ãã«æ‰ãˆã‚‹", score: 1 },
          { text: "åœ§è¿«çŠ¶æ³ã§ã‚‚å†·é™ã«åˆ¤æ–­ã§ãã‚‹", score: 1 },
          { text: "ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦å¯¾å¿œã§ãã‚‹", score: 1 },
          { text: "ã‚¤ãƒ©ã‚¤ãƒ©ã›ãšå®‰å®šã—ãŸæ°—æŒã¡ã‚’ä¿ã¤", score: 1 },
          { text: "æ°—æ™´ã‚‰ã—ã®æ–¹æ³•ã‚’æŒã£ã¦ã„ã‚‹", score: 1 }
        ]
      },
      // ï¼‹Î± 3å•
      {
        category: "action",
        id: "M",
        title: "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆè‡ªå·±èªè­˜ï¼‰",
        type: "single",
        text: "ã€ã²ã¨ã¤é¸æŠã€‘ã‚ãªãŸã¯è‡ªåˆ†è‡ªèº«ã®ğŸˆå‰ã«è¸ã¿å‡ºã™åŠ›ğŸˆã‚’ã©ã†æ‰ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ",
        options: [
          { text: "ã‹ãªã‚Šé«˜ã„ã¨æ€ã£ã¦ã„ã‚‹", score: 3 },
          { text: "ãã“ãã“ã‚ã‚‹ã¨æ€ã£ã¦ã„ã‚‹", score: 2 },
          { text: "ã‚ã¾ã‚Šé«˜ããªã„ãŒã“ã‚Œã‹ã‚‰ä¼¸ã°ã—ã¦ã„ããŸã„", score: 1 },
          { text: "é«˜ããªã„ãŒã“ã®ã¾ã¾ã§ã„ã„", score: 0 }
        ]
      },
      {
        category: "thinking",
        id: "N",
        title: "ã‚·ãƒ³ã‚­ãƒ³ã‚°ï¼ˆè‡ªå·±èªè­˜ï¼‰",
        type: "single",
        text: "ã€ã²ã¨ã¤é¸æŠã€‘ã§ã¯ã€ã‚ãªãŸã¯è‡ªåˆ†è‡ªèº«ã®ğŸ¦‰è€ƒãˆæŠœãåŠ›ğŸ¦‰ã‚’ã©ã†æ‰ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ",
        options: [
          { text: "ã‹ãªã‚Šé«˜ã„ã¨æ€ã£ã¦ã„ã‚‹", score: 3 },
          { text: "ãã“ãã“ã‚ã‚‹ã¨æ€ã£ã¦ã„ã‚‹", score: 2 },
          { text: "ã‚ã¾ã‚Šé«˜ããªã„ãŒã“ã‚Œã‹ã‚‰ä¼¸ã°ã—ã¦ã„ããŸã„", score: 1 },
          { text: "é«˜ããªã„ãŒã“ã®ã¾ã¾ã§ã„ã„", score: 0 }
        ]
      },
      {
        category: "teamwork",
        id: "O",
        title: "ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆè‡ªå·±èªè­˜ï¼‰",
        type: "single",
        text: "ã€ã²ã¨ã¤é¸æŠã€‘æœ€å¾Œã®è³ªå•ã§ã™ã€‚ã‚ãªãŸã¯è‡ªåˆ†è‡ªèº«ã®ğŸ¬ãƒãƒ¼ãƒ ã§åƒãåŠ›ğŸ¬ã‚’ã©ã†æ‰ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ",
        options: [
          { text: "ã‹ãªã‚Šé«˜ã„ã¨æ€ã£ã¦ã„ã‚‹", score: 3 },
          { text: "ãã“ãã“ã‚ã‚‹ã¨æ€ã£ã¦ã„ã‚‹", score: 2 },
          { text: "ã‚ã¾ã‚Šé«˜ããªã„ãŒã“ã‚Œã‹ã‚‰ä¼¸ã°ã—ã¦ã„ããŸã„", score: 1 },
          { text: "é«˜ããªã„ãŒã“ã®ã¾ã¾ã§ã„ã„", score: 0 }
        ]
      }
    ];

// ç¾åœ¨ã®è³ªå•ç•ªå·ãƒ»å›ç­”ä¿å­˜
let currentQuestion = 0;
const answers = {};
const container = document.getElementById('chat-container');

// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
function showMessage(msg, isBot = true) {
  const msgEl = document.createElement('div');
  msgEl.classList.add(isBot ? 'bot-msg' : 'user-msg');
  //msgEl.textContent = msg;
  msgEl.innerHTML = msg;
  container.appendChild(msgEl);
  container.scrollTop = container.scrollHeight;
}

// è³ªå•è¡¨ç¤º
function showQuestion() {
  container.innerHTML = "";

  const question = QUESTIONS[currentQuestion];
  const block = document.createElement('div');
  block.classList.add('question-block');

  const title = document.createElement('p');
  title.textContent = `${currentQuestion + 1}.${question.text}`;
  block.appendChild(title);

  const optionsGrid = document.createElement('div');
  optionsGrid.classList.add('options-grid');

  let optionsWithNone = [...question.options];
  if (question.type === "multi") {
    optionsWithNone.push({ text: "ã‚ã¦ã¯ã¾ã‚‹ã‚‚ã®ãŒãªã„", score: 0, isNone: true });
  }

  optionsWithNone.forEach(opt => {
    const btn = document.createElement('button');
    btn.textContent = opt.text;
    btn.classList.add('option-btn');
    if (opt.isNone) btn.classList.add('none-btn');

    if (question.type === "multi") {
      btn.addEventListener('click', () => {
        if (opt.isNone) {
          optionsGrid.querySelectorAll('.option-btn').forEach(b => {
            if (!b.classList.contains('none-btn')) b.classList.remove('selected');
          });
          btn.classList.add('selected');
        } else {
          optionsGrid.querySelector('.none-btn')?.classList.remove('selected');
          btn.classList.toggle('selected');
        }
      });
    } else {
      btn.addEventListener('click', () => {
        saveAnswer(question.id, [opt]);
        goToNextQuestion();
      });
    }
    optionsGrid.appendChild(btn);
  });

  block.appendChild(optionsGrid);

  if (question.type === "multi") {
    const nextBtn = document.createElement('button');
    nextBtn.textContent = "æ¬¡ã¸é€²ã‚€";
    nextBtn.classList.add('next-btn');
    nextBtn.addEventListener('click', () => {
      const selected = Array.from(block.querySelectorAll('.selected'))
        .map(btn => optionsWithNone.find(o => o.text === btn.textContent));
      saveAnswer(question.id, selected);
      goToNextQuestion();
    });
    block.appendChild(nextBtn);
  }

  container.appendChild(block);
}

// å›ç­”ä¿å­˜
function saveAnswer(qid, selectedOptions) {
  answers[qid] = selectedOptions.map(o => o.text);
}

// æ¬¡ã®è³ªå•ã¸
function goToNextQuestion() {
  currentQuestion++;
  if (currentQuestion < QUESTIONS.length) {
    showQuestion();
  } else {
    showResult();
  }
}




// ---------------------------
// é›†è¨ˆå‡¦ç†ï¼ˆAï½L + MNOï¼‰
// ---------------------------
function calculateScoresWithMNO(answers) {
  let scores = {
    A:0,B:0,C:0,D:0,E:0,F:0,
    G:0,H:0,I:0,J:0,K:0,L:0,
    action:0, thinking:0, teamwork:0
  };

  // å…¨å›ç­”ã‚’é›†è¨ˆ
  QUESTIONS.forEach(q => {
    const selected = answers[q.id] || [];
    selected.forEach(optionText => {
      const option = q.options.find(o => o.text === optionText);
      if (!option) return;

      // å€‹åˆ¥èƒ½åŠ›
      if (scores.hasOwnProperty(q.id)) {
        scores[q.id] += option.score;
      }

      // 3å¤§åˆ†é¡
      if (q.category === "action") scores.action += option.score;
      if (q.category === "thinking") scores.thinking += option.score;
      if (q.category === "teamwork") scores.teamwork += option.score;
    });
  });

  // M, N, O ã®ã‚¹ã‚³ã‚¢å–å¾—
  const M = (answers["M"] && answers["M"].length)
    ? QUESTIONS.find(q=>q.id==="M").options.find(o => o.text === answers["M"][0]).score
    : 0;
  const N = (answers["N"] && answers["N"].length)
    ? QUESTIONS.find(q=>q.id==="N").options.find(o => o.text === answers["N"][0]).score
    : 0;
  const O = (answers["O"] && answers["O"].length)
    ? QUESTIONS.find(q=>q.id==="O").options.find(o => o.text === answers["O"][0]).score
    : 0;

  return { scores, M, N, O };
}

// ---------------------------
// æ­£è¦åŒ–ï¼ˆ12èƒ½åŠ› + 3å¤§åˆ†é¡ 2æ®µéšï¼‰
// ---------------------------
function normalizeScoresWithMNO(scoresObj) {
  const scores = scoresObj.scores;
  const { M, N, O } = scoresObj;

  const maxScores12 = 5 + 3; // Aï½Lã¯5ç‚¹ + MNOæœ€å¤§3ç‚¹
  const maxScores3Base = { action: 15, thinking: 15, teamwork: 30 }; // 3å¤§åˆ†é¡
  const maxMNO = 3;

  // -------------------
  // 12èƒ½åŠ› â†’ 5ç‚¹ã‚¹ã‚±ãƒ¼ãƒ«
  // -------------------
  let normalized12 = {};
  for (let key of ["A","B","C","D","E","F","G","H","I","J","K","L"]) {
    // MNOã‚’è¦‹ãŸç›®ä¸Šåæ˜ 
    let addedValue = scores[key];
    if (["A","B","C"].includes(key)) addedValue += M;
    if (["D","E","F"].includes(key)) addedValue += N;
    if (["G","H","I","J","K","L"].includes(key)) addedValue += O;

    const value = (addedValue / maxScores12) * 5;
    normalized12[key] = parseFloat(value.toFixed(1)); // å°æ•°ç¬¬1ä½
  }

  // -------------------
  // 3å¤§åˆ†é¡ â‘ MNOãªã—ã§10ç‚¹ã‚¹ã‚±ãƒ¼ãƒ«
  // -------------------
  let normalized3Step1 = {};
  normalized3Step1.action = parseFloat((((scores.action - M) / maxScores3Base.action) * 10).toFixed(1));
  normalized3Step1.thinking = parseFloat((((scores.thinking - N) / maxScores3Base.thinking) * 10).toFixed(1));
  normalized3Step1.teamwork = parseFloat((((scores.teamwork - O) / maxScores3Base.teamwork) * 10).toFixed(1));

  // -------------------
  // 3å¤§åˆ†é¡ â‘¡MNOåŠ ç®—å¾Œã«å†ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
  // -------------------
  let final3 = {};
  final3.action = parseFloat((((normalized3Step1.action + M) / (10 + maxMNO)) * 10).toFixed(1));
  final3.thinking = parseFloat((((normalized3Step1.thinking + N) / (10 + maxMNO)) * 10).toFixed(1));
  final3.teamwork = parseFloat((((normalized3Step1.teamwork + O) / (10 + maxMNO)) * 10).toFixed(1));

  return { normalized12, final3 };
}

// ---------------------------
// çµæœè¡¨ç¤º
// ---------------------------
function showResult() {
  
  container.innerHTML = "";
  showMessage('<div style="text-align: center; font-size:16px; font-weight: bold;">ã€Šç¤¾ä¼šäººåŸºç¤åŠ›ãƒã‚§ãƒƒã‚¯ã®çµæœã€‹<br><br></div>');


  // é›†è¨ˆ â†’ æ­£è¦åŒ–
  const scoresObj = calculateScoresWithMNO(answers);
  const { normalized12, final3 } = normalizeScoresWithMNO(scoresObj);

  // ===========================
  // 3å¤§åˆ†é¡ï¼šæ¨ªæ£’ã‚°ãƒ©ãƒ•
  // ===========================
  const barCanvas = document.createElement('canvas');
  barCanvas.id = 'barChart';

  // â˜…ã“ã“ã§é«˜ã•ã‚’æŒ‡å®šï¼ˆpxã§ã‚‚%ã§ã‚‚OKï¼‰
  barCanvas.style.height = '300px'; // ä¾‹: 300pxã«æ‹¡å¤§

  container.appendChild(barCanvas);

  new Chart(barCanvas, {
    type: 'bar',
    data: {
      labels: ["å‰ã«è¸ã¿å‡ºã™åŠ›","è€ƒãˆæŠœãåŠ›","ãƒãƒ¼ãƒ ã§åƒãåŠ›"],
      datasets: [{
        label: '3å¤§åˆ†é¡ã‚¹ã‚³ã‚¢',
        data: [final3.action, final3.thinking, final3.teamwork],
        backgroundColor: [
          'rgba(250, 50, 50, 0.4)',
          'rgba(0, 50, 250, 0.4)',
          'rgba(50, 250, 50, 0.4)'
        ],
        borderColor: [
          'rgba(250, 50, 50, 1)',
          'rgba(0, 50, 250, 1)',
          'rgba(50, 250, 50, 1)'
        ],
        borderWidth: 0.5,
        barPercentage: 0.7 // æ£’è‡ªä½“ã®å¹…å‰²åˆï¼ˆ0~1ï¼‰
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      scales: {
        x: { beginAtZero: true, max: 10, ticks: { stepSize: 2 } }
      },
      plugins: {
/*        
        title: {
              display: true,
              text: 'ã€Šç¤¾ä¼šäººåŸºç¤åŠ›ãƒã‚§ãƒƒã‚¯ã®çµæœã€‹',
              font: { size: 18, weight: 'bold' },
              color: '#000',
              padding: { top: 10, bottom: 30 }
            },
*/
        legend: { display: false } // å‡¡ä¾‹ã‚’éè¡¨ç¤º
      }
    }
  });

  // ===========================
  // 12èƒ½åŠ›ï¼šãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
  // ===========================
  const radarCanvas = document.createElement('canvas');
  radarCanvas.id = 'radarChart';
  container.appendChild(radarCanvas);

  new Chart(radarCanvas, {
    type: 'radar',
    data: {
      labels: [
        "ä¸»ä½“æ€§","åƒãã‹ã‘åŠ›","å®Ÿè¡ŒåŠ›",
        "èª²é¡Œç™ºè¦‹åŠ›","è¨ˆç”»åŠ›","å‰µé€ åŠ›",
        "ç™ºä¿¡åŠ›","å‚¾è´åŠ›","æŸ”è»Ÿæ€§",
        "çŠ¶æ³æŠŠæ¡åŠ›","è¦å¾‹æ€§","ï½½ï¾„ï¾šï½½ï½ºï¾ï¾„ï¾›ï½°ï¾™åŠ›"
      ],
      datasets: [{
        label: '12èƒ½åŠ›ã‚¹ã‚³ã‚¢',
        data: [
          normalized12.A, normalized12.B, normalized12.C,
          normalized12.D, normalized12.E, normalized12.F,
          normalized12.G, normalized12.H, normalized12.I,
          normalized12.J, normalized12.K, normalized12.L
        ],
        backgroundColor: 'rgba(240, 200, 0, 0.4)',
        borderColor: 'rgba(255, 160, 0, 1)',
        borderWidth: 0.5,
        pointBackgroundColor: 'rgba(255, 100, 0, 1)',
        pointRadius: 2 // ãƒã‚¤ãƒ³ãƒˆã®å¤§ãã•
      }]
    },
    options: {
      responsive: true,
      scales: {
        r: {
          min: 0,
          max: 5,
          ticks: { stepSize: 1 }
        }
      },
      plugins: { legend: { display: false } } // å‡¡ä¾‹ã‚’éè¡¨ç¤º
    }
  });



function createShareLink(action, thinking, teamwork) {
  const text = encodeURIComponent(
    `ç¤¾ä¼šäººåŸºç¤åŠ›è¨ºæ–­ã®çµæœï¼š\nå‰ã«è¸ã¿å‡ºã™åŠ›ï¼š${action}\nè€ƒãˆæŠœãåŠ›ï¼š${thinking}\nãƒãƒ¼ãƒ ã§åƒãåŠ›ï¼š${teamwork}\n#ç¤¾ä¼šäººåŸºç¤åŠ›è¨ºæ–­`
  );
  return `https://twitter.com/intent/tweet?text=${text}`;
}

/*
function createShareLink(action, thinking, teamwork) {
  const text = encodeURIComponent(
    `ç¤¾ä¼šäººåŸºç¤åŠ›è¨ºæ–­ã®çµæœï¼š\nå‰ã«è¸ã¿å‡ºã™åŠ›ï¼š${action}\nè€ƒãˆæŠœãåŠ›ï¼š${thinking}\nãƒãƒ¼ãƒ ã§åƒãåŠ›ï¼š${teamwork}\nè¨ºæ–­ã¯ã“ã¡ã‚‰â†“`
  );
  const url = encodeURIComponent("https://yourdomain.com/shakaijin-diagnosis"); // å®Ÿéš›ã®è¨ºæ–­URL
  return `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
}
*/


        const buttonsContainer = document.getElementById("result-buttons"); //HTMLå´ã«è¦ç´ ã‚’ç”¨æ„ã—ã¦ãŠã
        
        // å…±é€šãƒœã‚¿ãƒ³ä½œæˆé–¢æ•°
        const createButton = (tag, contentHtml, className, onClickOrHref) => {
        // tag: "a" ãªã‚‰ãƒªãƒ³ã‚¯ã€"button" ãªã‚‰ãƒœã‚¿ãƒ³ï¼ˆã¾ãŸã¯ "button" ä»¥å¤–ã¯ãƒœã‚¿ãƒ³æ‰±ã„ï¼‰
        const isLink = tag === "a";
        const el = document.createElement(isLink ? "a" : "button");

        // ã‚¯ãƒ©ã‚¹ã¯å…ˆã«ä»˜ä¸ã—ã¦ãŠã
        el.className = `action-btn ${className || ""}`;

        if (isLink) {
          // onClickOrHref ã¯ href ã®æ–‡å­—åˆ—ã¨ã—ã¦æ‰±ã†
          el.href = onClickOrHref || "#";
          el.target = "_blank";
          el.rel = "noopener noreferrer";
          // contentHtml ã‚’ HTML ã¨ã—ã¦æŒ¿å…¥ï¼ˆ<br>ã‚’åæ˜ ã•ã›ãŸã„å ´åˆã«å¿…è¦ï¼‰
          el.innerHTML = contentHtml;
        } else {
          // ãƒœã‚¿ãƒ³ã®å ´åˆã€onClickOrHref ã¯é–¢æ•°
          el.type = "button";
          el.innerHTML = contentHtml;
          if (typeof onClickOrHref === "function") {
            el.addEventListener("click", onClickOrHref);
          }
        }

          return el;
        };


        // â‘  Xã‚·ã‚§ã‚¢ãƒœã‚¿ãƒ³
        const shareBtn = createButton(
          "a",
          "Xã§ã‚·ã‚§ã‚¢ã™ã‚‹",
          "share-btn",
          createShareLink(final3.action, final3.thinking, final3.teamwork)
        );

        // â‘¡ å†è¨ºæ–­ãƒœã‚¿ãƒ³
        const retryBtn = createButton(
          "button",
          "ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹",
          "ghost",
          () => location.reload()
        );

        // â‘¢ noteãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒœã‚¿ãƒ³
        const noteBtn = createButton(
          "a",
          "ã“ã®è¨ºæ–­ã‚¢ãƒ—ãƒªã‚’ä½œã£ãŸäººã¯<br>ã“ã¡ã‚‰ï¼ˆnoteãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¸ï¼‰",
          "note-btn",
          "https://note.com/alc_chron2025"
        );

        // é…ç½®ï¼ˆä¸Šã‹ã‚‰é †ç•ªã«è¿½åŠ ï¼‰
        buttonsContainer.appendChild(shareBtn);
        buttonsContainer.appendChild(retryBtn);
        buttonsContainer.appendChild(noteBtn);
      









}







// åˆæœŸè¡¨ç¤º
showMessage("ã“ã‚“ã«ã¡ã¯ï¼ã“ã‚Œã‹ã‚‰ç¤¾ä¼šäººåŸºç¤åŠ›ãƒã‚§ãƒƒã‚¯ã‚’å§‹ã‚ã¾ã™ã€‚");
showQuestion();

</script>
</body>
</html>